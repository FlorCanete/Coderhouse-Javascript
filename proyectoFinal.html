<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        .fa-shopping-cart{
            font-size: 20px;
        }

        body{
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 100vh;
        }

        .buttonCart
        {
            border: none;
        }
        .navbar,
        .container.mt-3,
        .modal-header
        {
            background-color: #F2F2F4;
        }
        .fa-shopping-cart{
            color: #42387c;
        }
        .items{
            background-color:#E6E6E8;
            width: 300px;
            height: 300px;
        }
        .items .item img
        {
            object-fit: contain;
        }
        #cart-items
        {
            list-style-type: none;
            font-weight: bold;
        }

        #total{
            font-weight: bold;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container-fluid d-flex justify-content-around">
            <a class="navbar-brand">
                <img src="Logo.svg" alt="Javascript" style="width:40px" class="d-inline-block align-text-top" width="100px">
                Compra Online
            </a>



            <form class="d-flex" role="search">
                <input class="form-control me-2 " type="search" placeholder="Search" aria-label="Search">

                <button class="btn btn-outline-warning">Search</button>
            </form>

            <button id="open-cart-button" class="buttonCart">
                <i class="fas fa-shopping-cart"></i>
            </button>
        </div>
    </nav>

    <div class="container mt-3">
        <div class="col-sm-12">
            <div class="row">
                <h1 class="text-center">
                    Mira todos nuestros productos
                </h1>

                <div class="d-flex justify-content-around align-items-center flex-wrap m-2" id="products">

                </div>
            </div>
        </div>
    </div>

    <script>
        const products = [
            {id: 1, name: 'Joystick', price: 3500, image: 'Joystick.png'},
            {id: 2, name: 'Teclado Gamer', price: 10000, image: 'teclado.png'},
            {id: 3, name: 'Mouse Gamer', price: 5000, image: 'mouse.png'},
            {id: 4, name: 'Gabinete', price: 70000, image: 'gabinete.png'},
            {id: 6, name: 'Mousepad', price: 8000, image: 'mousepad.png'},
            {id: 7, name: 'Auriculares Gamer', price: 1500, image: 'auriculares.png'},
            {id: 8, name: 'Monitor 27 Pulgadas', price: 30000, image: 'monitor.png'},
            {id: 9, name: 'Parlante', price: 2000, image: 'parlante.png'},
        ];

        const cart = [];

        //Agregar
        function MostrarProducto() {
            const productsContainer = document.getElementById('products');
            productsContainer.innerHTML = '';

            products.forEach(product => {
                const productElement = document.createElement('div');
                productElement.innerHTML = `
                    <div class="d-flex justify-content-around align-items-center flex-wrap m-2">
                        <div class="items d-flex flex-column justify-content-center align-items-center rounded";>
                            <div class="item">
                                <img src="${product.image}" alt="" width="150px"  height="100px" >
                            </div>

                            <h3 class="text-center">${product.name}</h2>

                            <p>Precio: <span>$${product.price}</span></p>

                            <button class="add-to-cart btn btn-outline-success" onclick="AgregarCarrito(${product.id})" type="button">Add to cart</button>
                        </div>
                    </div>
                    `;
                productsContainer.appendChild(productElement);
            });
        }

        //Añadir
        function AgregarCarrito(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                cart.push(product);
            }
        }

        //Modal
        function ModalCarrito() {
            const contenido = document.createElement('div');
            contenido.innerHTML = `
                <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="Carrito" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="Carrito">Tus Compras</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <ul id="cart-items">

                                </ul>
                                <p>Total: <span id="total">$0</span></p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                                <button type="button" class="btn btn-success" id="ReadyCart">Realizar Compra</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(contenido);
                //Actualizar
            const cartItemsModal = document.getElementById('cart-items');
            cartItemsModal.innerHTML = '';

            let totalPrice = 0;

            cart.forEach(item => {
                const cartItemModal = document.createElement('li');

                cartItemModal.textContent = item.name;
                cartItemsModal.appendChild(cartItemModal);
                totalPrice += item.price;
            });

            document.getElementById('total').textContent = `$${totalPrice}`;

            const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
            cartModal.show();
        }

        document.getElementById('open-cart-button').addEventListener('click', ModalCarrito);

        document.addEventListener('DOMContentLoaded', MostrarProducto);

        $('#ReadyCart').click(function(){
            swal({
                title: 'Compra Realizada',
                type: 'success',
                showCancelButton: true,
            })
        })
    </script>

    <footer class="col-sm-12 bg-dark">
        <p class="text-center text-light"> Copyright © Coderhouse</p>
    </footer>
</body>
</html>